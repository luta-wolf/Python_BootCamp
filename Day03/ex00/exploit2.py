from bs4 import BeautifulSoup

new_title = "Evil Corp - Stealing your money every day"
script = \
    """<script>
            hacked = function() {
                alert('hacked');
            }
            window.addEventListener('load',
                function() {
                    var f = document.querySelector("form");
                    f.setAttribute("onsubmit", "hacked()");
                },
                false
            );
        </script>"""
new_link = "https://mrrobot.fandom.com/wiki/Fsociety"

with open('evilcorp.html') as file:
    old = file.read()
    soup = BeautifulSoup(old, 'html.parser')
    scrpt = BeautifulSoup(script, 'html.parser')
    soup.body.append(scrpt)
    soup.title.string.replace_with(new_title)
    soup.a["href"] = new_link

    original_tag = soup.body
    new_tag = soup.new_tag("h1")
    original_tag.insert(0, new_tag)
    soup.h1.append(soup.span.text + ", you are hacked!")

    with open("evilcorp_hacked.html", "w") as file:
        file.write(str(soup))
        # file.write(soup.prettify())
